<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Makedon World News | Global Aggregator</title>
    <style>
        :root { --red: #d32f2f; --black: #121212; --gray: #f8f9fa; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; background: var(--gray); }
        header { background: var(--black); color: white; text-align: center; padding: 40px 20px; border-bottom: 4px solid var(--red); }
        .container { max-width: 1100px; margin: auto; padding: 20px; }
        
        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        .tab-btn { padding: 10px 20px; border: none; background: white; border-radius: 5px; cursor: pointer; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .tab-btn.active { background: var(--red); color: white; }

        #news-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); display: flex; flex-direction: column; transition: 0.3s; border: 1px solid #eee; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .card-body { padding: 18px; flex-grow: 1; }
        .source-tag { font-size: 0.7rem; color: var(--red); font-weight: 800; text-transform: uppercase; letter-spacing: 1px; }
        .title { font-size: 1.15rem; font-weight: 700; margin: 10px 0; line-height: 1.3; color: #1a1a1a; }
        .desc { font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 15px; }
        .link-btn { text-decoration: none; color: white; background: var(--black); padding: 8px 15px; border-radius: 6px; font-size: 0.85rem; display: inline-block; transition: 0.2s; }
        .link-btn:hover { background: var(--red); }
        
        .loader { text-align: center; padding: 50px; font-size: 1.2rem; grid-column: 1/-1; }
        footer { background: var(--black); color: #888; text-align: center; padding: 30px; margin-top: 50px; }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0; font-size: 2.5rem;">üåç Makedon World News</h1>
    <p style="opacity: 0.8;">–í–∞—à–∏–æ—Ç –ø—Ä–æ–∑–æ—Ä–µ—Ü –∫–æ–Ω —Å–≤–µ—Ç–æ—Ç ‚Äì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤–æ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ</p>
</header>

<div class="container">
    <div class="nav-tabs">
        <button class="tab-btn active" onclick="loadCategory('MK')">üá≤üá∞ –ú–∞–∫–µ–¥–æ–Ω–∏—ò–∞</button>
        <button class="tab-btn" onclick="loadCategory('AI')">ü§ñ AI –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—ò–∞</button>
        <button class="tab-btn" onclick="loadCategory('WORLD')">üåê –°–≤–µ—Ç–æ—Ç</button>
    </div>

    <div id="news-grid">
        <div class="loader">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –≤–µ—Å—Ç–∏—Ç–µ...</div>
    </div>
</div>

<footer>
    <p>¬© 2026 Makedon World News | –ù–µ–∑–∞–≤–∏—Å–µ–Ω –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä</p>
</footer>

<script>
// –ò–ó–í–û–†–ò –û–î –¢–í–û–à–û–¢ CSV –§–ê–à–õ
const SOURCES = {
    MK: [
        { name: "Sitel", url: "https://sitel.com.mk/rss.xml" },
        { name: "Kanal 5", url: "https://kanal5.com.mk/rss" },
        { name: "A1On", url: "https://a1on.mk/feed/" },
        { name: "Telma", url: "https://telma.com.mk/feed/" }
    ],
    AI: [
        { name: "AI21 Labs", url: "https://www.ai21.com/rss" },
        { name: "Anthropic", url: "https://www.anthropic.com/rss" },
        { name: "OpenAI", url: "https://openai.com/news/rss.xml" }
    ],
    WORLD: [
        { name: "BBC World", url: "https://feeds.bbci.co.uk/news/world/rss.xml" },
        { name: "Reuters", url: "https://www.reutersagency.com/feed/" }
    ]
};

const PROXY = "https://api.allorigins.win/raw?url=";

async function loadCategory(cat) {
    // –ü—Ä–æ–º–µ–Ω–∞ –Ω–∞ –∞–∫—Ç–∏–≤–µ–Ω –∫–æ–ø—á–µ
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    event?.target.classList.add('active');

    const grid = document.getElementById('news-grid');
    grid.innerHTML = '<div class="loader">–ì–∏ –≤–ª–µ—á–µ–º–µ –Ω–∞—ò–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...</div>';
    
    let allNews = [];
    const selectedSources = SOURCES[cat];

    for (let src of selectedSources) {
        try {
            const res = await fetch(PROXY + encodeURIComponent(src.url));
            const text = await res.text();
            const xml = new DOMParser().parseFromString(text, "text/xml");
            const items = xml.querySelectorAll("item");

            items.forEach(el => {
                allNews.push({
                    source: src.name,
                    title: el.querySelector("title")?.textContent || "",
                    link: el.querySelector("link")?.textContent || "#",
                    desc: el.querySelector("description")?.textContent.replace(/<\/?[^>]+(>|$)/g, "").substring(0, 110) + "...",
                    date: new Date(el.querySelector("pubDate")?.textContent || Date.now())
                });
            });
        } catch (e) { console.log("–ì—Ä–µ—à–∫–∞ —Å–æ:", src.name); }
    }

    allNews.sort((a, b) => b.date - a.date);

    grid.innerHTML = "";
    allNews.slice(0, 40).forEach(news => {
        grid.innerHTML += `
            <div class="card">
                <div class="card-body">
                    <span class="source-tag">${news.source} ‚Ä¢ ${news.date.toLocaleDateString('mk-MK')}</span>
                    <div class="title">${news.title}</div>
                    <p class="desc">${news.desc}</p>
                    <a href="${news.link}" target="_blank" class="link-btn">–ü—Ä–æ—á–∏—Ç–∞—ò –ø–æ–≤–µ—ú–µ ‚Üí</a>
                </div>
            </div>
        `;
    });
}

// –°—Ç–∞—Ä—Ç—É–≤–∞—ò —Å–æ –ú–∞–∫–µ–¥–æ–Ω–∏—ò–∞
loadCategory('MK');
</script>

</body>
</html>
