<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Makedon World News | Global Aggregator</title>
    <style>
        :root { --red: #d32f2f; --black: #121212; --gray: #f8f9fa; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; background: var(--gray); }
        header { background: var(--black); color: white; text-align: center; padding: 30px 20px; border-bottom: 4px solid var(--red); }
        .container { max-width: 1100px; margin: auto; padding: 20px; }
        
        /* Search Bar Style */
        .search-container { margin-bottom: 25px; text-align: center; }
        #search-input { 
            width: 100%; max-width: 600px; padding: 12px 20px; 
            border: 2px solid #ddd; border-radius: 30px; font-size: 1rem;
            outline: none; transition: 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        #search-input:focus { border-color: var(--red); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        .tab-btn { padding: 10px 20px; border: none; background: white; border-radius: 5px; cursor: pointer; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .tab-btn.active { background: var(--red); color: white; }

        #news-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); display: flex; flex-direction: column; transition: 0.3s; border: 1px solid #eee; }
        .card:hover { transform: translateY(-5px); }
        .card-body { padding: 18px; flex-grow: 1; }
        .source-tag { font-size: 0.7rem; color: var(--red); font-weight: 800; text-transform: uppercase; }
        .title { font-size: 1.1rem; font-weight: 700; margin: 10px 0; color: #1a1a1a; }
        .desc { font-size: 0.85rem; color: #555; line-height: 1.5; margin-bottom: 15px; }
        .link-btn { text-decoration: none; color: white; background: var(--black); padding: 8px 15px; border-radius: 6px; font-size: 0.8rem; display: inline-block; }
        
        .loader { text-align: center; padding: 50px; font-size: 1.2rem; grid-column: 1/-1; }
        footer { background: var(--black); color: #888; text-align: center; padding: 30px; margin-top: 50px; }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0;">üåç Makedon World News</h1>
    <p>–ü—Ä–µ–±–∞—Ä–∞—ò—Ç–µ –≥–∏ —Å–∏—Ç–µ —Å–≤–µ—Ç—Å–∫–∏ –≤–µ—Å—Ç–∏ –Ω–∞ –µ–¥–Ω–æ –º–µ—Å—Ç–æ</p>
</header>

<div class="container">
    <div class="search-container">
        <input type="text" id="search-input" placeholder="üîç –ü—Ä–µ–±–∞—Ä–∞—ò –≤–µ—Å—Ç–∏ (–ø—Ä. OpenAI, –°–∏—Ç–µ–ª, –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—ò–∞...)" onkeyup="filterNews()">
    </div>

    <div class="nav-tabs">
        <button class="tab-btn active" onclick="loadCategory('MK')">üá≤üá∞ –ú–∞–∫–µ–¥–æ–Ω–∏—ò–∞</button>
        <button class="tab-btn" onclick="loadCategory('AI')">ü§ñ AI –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—ò–∞</button>
        <button class="tab-btn" onclick="loadCategory('WORLD')">üåê –°–≤–µ—Ç–æ—Ç</button>
    </div>

    <div id="news-grid">
        <div class="loader">–í—á–∏—Ç—É–≤–∞—ö–µ...</div>
    </div>
</div>

<footer>
    <p>¬© 2026 Makedon World News</p>
</footer>

<script>
let CURRENT_NEWS = []; // –û–≤–¥–µ –≥–∏ —á—É–≤–∞–º–µ –≤—á–∏—Ç–∞–Ω–∏—Ç–µ –≤–µ—Å—Ç–∏ –∑–∞ –ø—Ä–µ–±–∞—Ä—É–≤–∞—ö–µ

const SOURCES = {
    MK: [
        { name: "Sitel", url: "https://sitel.com.mk/rss.xml" },
        { name: "Kanal 5", url: "https://kanal5.com.mk/rss" },
        { name: "A1On", url: "https://a1on.mk/feed/" }
    ],
    AI: [
        { name: "OpenAI", url: "https://openai.com/news/rss.xml" },
        { name: "Anthropic", url: "https://www.anthropic.com/rss" },
        { name: "Wired AI", url: "https://www.wired.com/category/artificial-intelligence/feed" }
    ],
    WORLD: [
        { name: "BBC News", url: "https://feeds.bbci.co.uk/news/rss.xml" },
        { name: "Reuters", url: "https://www.reutersagency.com/feed/" }
    ]
};

const PROXY = "https://api.allorigins.win/raw?url=";

async function loadCategory(cat) {
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    if(event) event.target.classList.add('active');

    const grid = document.getElementById('news-grid');
    grid.innerHTML = '<div class="loader">–ì–∏ —Å–æ–±–∏—Ä–∞–º–µ –≤–µ—Å—Ç–∏—Ç–µ...</div>';
    document.getElementById('search-input').value = ""; // –†–µ—Å–µ—Ç–∏—Ä–∞—ò –ø—Ä–µ–±–∞—Ä—É–≤–∞—ö–µ
    
    CURRENT_NEWS = [];
    const selectedSources = SOURCES[cat];

    for (let src of selectedSources) {
        try {
            const res = await fetch(PROXY + encodeURIComponent(src.url));
            const text = await res.text();
            const xml = new DOMParser().parseFromString(text, "text/xml");
            const items = xml.querySelectorAll("item");

            items.forEach(el => {
                CURRENT_NEWS.push({
                    source: src.name,
                    title: el.querySelector("title")?.textContent || "",
                    link: el.querySelector("link")?.textContent || "#",
                    desc: el.querySelector("description")?.textContent.replace(/<\/?[^>]+(>|$)/g, "").substring(0, 110) + "...",
                    date: new Date(el.querySelector("pubDate")?.textContent || Date.now())
                });
            });
        } catch (e) { console.log("–ì—Ä–µ—à–∫–∞:", src.name); }
    }

    CURRENT_NEWS.sort((a, b) => b.date - a.date);
    displayNews(CURRENT_NEWS);
}

function displayNews(newsArray) {
    const grid = document.getElementById('news-grid');
    grid.innerHTML = "";
    
    if (newsArray.length === 0) {
        grid.innerHTML = '<div class="loader">–ù–µ–º–∞ –ø—Ä–æ–Ω–∞—ò–¥–µ–Ω–∏ –≤–µ—Å—Ç–∏ –∑–∞ —Ç–æ—ò —Ç–µ—Ä–º–∏–Ω.</div>';
        return;
    }

    newsArray.forEach(news => {
        grid.innerHTML += `
            <div class="card">
                <div class="card-body">
                    <span class="source-tag">${news.source} ‚Ä¢ ${news.date.toLocaleDateString('mk-MK')}</span>
                    <div class="title">${news.title}</div>
                    <p class="desc">${news.desc}</p>
                    <a href="${news.link}" target="_blank" class="link-btn">–ü—Ä–æ—á–∏—Ç–∞—ò ‚Üí</a>
                </div>
            </div>
        `;
    });
}

// –§–£–ù–ö–¶–ò–à–ê –ó–ê –ü–†–ï–ë–ê–†–£–í–ê–ä–ï
function filterNews() {
    const query = document.getElementById('search-input').value.toLowerCase();
    const filtered = CURRENT_NEWS.filter(n => 
        n.title.toLowerCase().includes(query) || 
        n.source.toLowerCase().includes(query) ||
        n.desc.toLowerCase().includes(query)
    );
    displayNews(filtered);
}

loadCategory('MK');
</script>

</body>
</html>
