<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAKEDON WORLD NEWS | 1312 MONOLITH</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { --gold: #c5a059; --bg: #000; --text: #eee; }
        * { box-sizing: border-box; }
        body { font-family: 'Cinzel', serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; }

        header { 
            background: #0a0a0a; border-bottom: 3px solid var(--gold); padding: 20px;
            text-align: center; position: sticky; top: 0; z-index: 1000;
        }
        .hero-img { width: 70px; border: 1px solid var(--gold); margin-bottom: 10px; }
        h1 { font-family: 'Orbitron'; font-size: 1.5rem; letter-spacing: 5px; color: var(--gold); margin: 0; }

        .nav-container { 
            background: #111; border-bottom: 1px solid var(--gold); 
            display: flex; overflow-x: auto; padding: 10px; gap: 15px;
        }
        .nav-btn { 
            background: transparent; border: 1px solid var(--gold); color: var(--gold);
            padding: 8px 15px; font-family: 'Orbitron'; cursor: pointer; white-space: nowrap; transition: 0.3s;
        }
        .nav-btn:hover, .nav-btn.active { background: var(--gold); color: #000; }

        .main-content { padding: 20px; max-width: 1200px; margin: 0 auto; }
        
        #status-bar { 
            text-align: center; color: var(--gold); font-family: 'Orbitron'; 
            font-size: 0.8rem; margin-bottom: 20px; 
        }

        .grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 25px; 
        }

        .news-card { 
            background: #050505; border: 1px solid #222; padding: 20px;
            transition: 0.4s; position: relative;
        }
        .news-card:hover { border-color: var(--gold); transform: translateY(-5px); }
        .card-tag { color: var(--gold); font-family: 'Orbitron'; font-size: 0.6rem; margin-bottom: 10px; display: block; }
        .card-title { font-size: 1.1rem; line-height: 1.4; margin-bottom: 15px; color: #fff; }
        
        .btn-read { 
            display: block; text-align: center; text-decoration: none;
            background: transparent; border: 1px solid var(--gold); color: var(--gold);
            padding: 10px; font-family: 'Orbitron'; font-size: 0.7rem; transition: 0.3s;
        }
        .btn-read:hover { background: var(--gold); color: #000; }

        footer { 
            background: #0a0a0a; border-top: 2px solid var(--gold); 
            padding: 20px; text-align: center; font-family: 'Orbitron'; font-size: 0.7rem; color: var(--gold);
        }

        /* Loading Animation */
        .spinner { width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid var(--gold); border-radius: 50%; animation: spin 1s linear infinite; margin: 50px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<header>
    <img src="https://raw.githubusercontent.com/makedonworldnews-cmyk/makedonworldnews-cmyk.github.io/main/hero.jpg" class="hero-img">
    <h1>MAKEDON WORLD NEWS</h1>
</header>

<div class="nav-container" id="nav">
    </div>

<div class="main-content">
    <div id="status-bar">СИСТЕМ: ПОДГОТОВЕН // 1312 NODES</div>
    <div id="loader" style="display:none;"><div class="spinner"></div></div>
    <div id="news-grid" class="grid"></div>
</div>

<footer>
    <div>ENGINE: SUPREME GOOGLE NEURAL 1312</div>
    <div id="v-count" style="margin-top:5px;">LIVE READERS: 1,312,118</div>
</footer>

<script>
    const SECTORS = [
        { name: "МАКЕДОНИЈА", query: "Macedonia news" },
        { name: "ВЕШТАЧКА ИНТЕЛИГЕНЦИЈА", query: "Artificial Intelligence" },
        { name: "БАЛКАН", query: "Balkans geopolitics" },
        { name: "КАРИБИ & КУБА", query: "Cuba Caribbean news" },
        { name: "ОКЕАНИ", query: "Ocean environment science" },
        { name: "СВЕТ", query: "World breaking news" }
    ];

    const PROXY = "https://api.allorigins.win/raw?url=";
    const grid = document.getElementById('news-grid');
    const loader = document.getElementById('loader');
    const nav = document.getElementById('nav');
    const status = document.getElementById('status-bar');

    function initNav() {
        nav.innerHTML = SECTORS.map((s, idx) => `
            <button class="nav-btn ${idx === 0 ? 'active' : ''}" onclick="loadNews(${idx}, this)">
                ${s.name}
            </button>
        `).join('');
    }

    async function loadNews(idx, btn) {
        // UI Reset
        if(btn) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        
        grid.innerHTML = '';
        loader.style.display = 'block';
        status.innerText = `ВЧИТУВАЊЕ СЕКТОР: ${SECTORS[idx].name}...`;

        const rssUrl = `https://news.google.com/rss/search?q=${encodeURIComponent(SECTORS[idx].query)}&hl=mk&gl=MK&ceid=MK:mk`;
        
        try {
            const response = await fetch(PROXY + encodeURIComponent(rssUrl));
            if(!response.ok) throw new Error("Proxy Error");
            
            const data = await response.text();
            const parser = new DOMParser();
            const xml = parser.parseFromString(data, "text/xml");
            const items = xml.querySelectorAll("item");

            loader.style.display = 'none';
            status.innerText = `СЕКТОР: ${SECTORS[idx].name} // АКТИВЕН`;

            if(items.length === 0) {
                grid.innerHTML = `<div style="grid-column: 1/-1; text-align:center;">Грешка при преземање на податоци. Обидете се пак.</div>`;
                return;
            }

            items.forEach((item, i) => {
                if(i > 15) return;
                const title = item.querySelector("title").textContent;
                const link = item.querySelector("link").textContent;
                const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleDateString('mk-MK');

                grid.innerHTML += `
                    <div class="news-card">
                        <span class="card-tag">1312_NODE // ${pubDate}</span>
                        <div class="card-title">${title}</div>
                        <a href="${link}" target="_blank" class="btn-read">ПРОЧИТАЈ ПОВЕЌЕ</a>
                    </div>
                `;
            });

        } catch (error) {
            loader.style.display = 'none';
            status.innerText = "ГРЕШКА ВО СИСТЕМОТ. ПРОВЕРЕТЕ ЈА ВРСКАТА.";
            grid.innerHTML = `<div style="grid-column: 1/-1; text-align:center; color:red;">Грешка во врската со 1312 серверите.</div>`;
        }
    }

    // Стартување
    initNav();
    loadNews(0);

    // Часовник и посетители
    setInterval(() => {
        const count = Math.floor(Math.random() * (1312999 - 1312000) + 1312000);
        document.getElementById('v-count').innerText = `LIVE READERS: ${count.toLocaleString()}`;
    }, 5000);
</script>

</body>
</html>
